<div class="container-fluid main-container row g-3">
  <!-- Conteneur principal avec le graphe -->
  <div class="col-12 col-lg-8 graph-container mb-3 mb-lg-0">
    <!-- Conteneur pour Sigma -->
    <div #container class="sigma-canvas" style="height:400px;width:100%;background:#f5f5fa;border-radius:1rem;"></div>
    <!-- Actions -->
    <div class="controls d-flex flex-wrap gap-2 justify-content-end mt-2">
      <button type="button" (click)="exportGraph()" class="btn btn-primary d-flex align-items-center gap-1">
        <span aria-hidden="true">üì§</span>
        <span>Exporter</span>
      </button>
      <button type="button" (click)="editGraph()" class="btn btn-secondary d-flex align-items-center gap-1">
        <span aria-hidden="true">‚úèÔ∏è</span>
        <span>Editer</span>
      </button>
    </div>
  </div>

  <!-- Panneau d'informations lat√©ral -->
  @if (showCrudPanel) {
    <div class="col-12 col-lg-4 crud-panel">
      <div class="panel-header d-flex justify-content-between align-items-center">
        <h3 class="h5 mb-0">
          @if (selectedElementType === 'oeuvre') {
            D√©tails de l'≈ìuvre
          } @else if (selectedElementType === 'artiste') {
            D√©tails de l'artiste
          } @else if (selectedElementType === 'relation') {
            D√©tails de la relation
          }
        </h3>
        <button class="close-btn ms-2" (click)="clearSelection()" aria-label="Fermer le panneau">√ó</button>
      </div>
      <div class="panel-content">
        <!-- Affichage des d√©tails de l'√©l√©ment s√©lectionn√© -->
        @if (selectedElement) {
          <div class="element-details">
            @if (selectedElementType === 'oeuvre' && selectedOeuvre) {
              <div class="detail-item"><strong>Nom:</strong> {{ selectedOeuvre.nom }}</div>
              <div class="detail-item"><strong>Date de cr√©ation:</strong> {{ selectedOeuvre.date_creation }}</div>
              @if (selectedOeuvre.type) {
                <div class="detail-item"><strong>Type:</strong> {{ selectedOeuvre.type }}</div>
              }
              @if (selectedOeuvre.genre) {
                <div class="detail-item"><strong>Genre:</strong> {{ selectedOeuvre.genre }}</div>
              }
              @if (selectedOeuvre.mouvement) {
                <div class="detail-item"><strong>Mouvement:</strong> {{ selectedOeuvre.mouvement }}</div>
              }
              @if (selectedOeuvre.dimensions) {
                <div class="detail-item"><strong>Dimensions:</strong> {{ selectedOeuvre.dimensions }}</div>
              }
              @if (selectedOeuvre.description) {
                <div class="detail-item"><strong>Description:</strong> {{ selectedOeuvre.description }}</div>
              }
            }
            @if (selectedElementType === 'artiste' && selectedArtiste) {
              <div class="detail-item"><strong>Nom:</strong> {{ selectedArtiste.nom }}</div>
              @if (selectedArtiste.prenom) {
                <div class="detail-item"><strong>Pr√©nom:</strong> {{ selectedArtiste.prenom }}</div>
              }
              @if (selectedArtiste.nationalite) {
                <div class="detail-item"><strong>Nationalit√©:</strong> {{ selectedArtiste.nationalite }}</div>
              }
              @if (selectedArtiste.description) {
                <div class="detail-item"><strong>Description:</strong> {{ selectedArtiste.description }}</div>
              }
              @if (selectedArtiste.genre) {
                <div class="detail-item"><strong>Genre:</strong> {{ selectedArtiste.genre }}</div>
              }
            }
            @if (selectedElementType === 'relation' && selectedRelation) {
              @if (selectedRelation.type) {
                <div class="detail-item"><strong>Type:</strong> {{ selectedRelation.type }}</div>
              }
              @if (selectedRelation.sourceId) {
                <div class="detail-item"><strong>Source ID:</strong> {{ selectedRelation.sourceId }}</div>
              }
              @if (selectedRelation.targetId) {
                <div class="detail-item"><strong>Target ID:</strong> {{ selectedRelation.targetId }}</div>
              }
            }
          </div>
        }
      </div>
    </div>
  }
</div>

